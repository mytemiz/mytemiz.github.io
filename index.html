<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>SDK playground</title>
    <script type="text/javascript" src="//connect.soundcloud.com/sdk-2.0.0.js"></script>
  </head>
  <body>
    <button id="connect">connect</button>
    <button id="record">record 1s</button>
    <div id="oembed"></div>
    <p id="accesstoken"></p>

    <script type="text/javascript">
      SC.initialize({
        client_id: '56146ea953310ce42e06ff8709715cd8',
        redirect_uri: 'http://localhost:8000/callback.html'
      });
      console.log('tamam degil');

      /*SC.get('users/forss').then(function(user){console.log('Forss', user);});

      SC.get('tracks/soulhack').then(function(user){console.log('It\'s a deep Soulhack', user);}).catch();

      SC.get('tracks/soulhack-3').then(function(user){console.log('It\'s a deeper Soulhack', user);}).catch(function(error){
        console.log('catch', error);
      });
      */
      var connect = function(){
      SC.connect(function(){
          /*
           SC.put("/me/followings/3207", function(user, error){
                  if(error){
                           alert("Error: " + error.message);
                              }else{
                                       alert("You are now following " + user.username);
                                          }
                   });*/
          console.log(SC.accessToken());
          document.getElementById('accesstoken').innerHTML = SC.accessToken();
      });
      };
      /*
      var connect = function(){
        SC.connect().then(function(options){console.log('success', options);}).catch(function(op){console.log('error', op);})
      };*/
      document.getElementById('connect').addEventListener('click', connect);
     /*
      var oembedElement = document.getElementById('oembed');
      SC.oEmbed('https://soundcloud.com/forss/soulhack', {element: oembedElement}).then(function(result){
        console.log('oembed', result);
      }).catch(function(err){
        console.log('oembed err', err);
      });

      var record = function(){
        window.recorder = new SC.Recorder();
        recorder.start().then(function(){
          setTimeout(function() {
            recorder.stop();
            recorder.getWAV().then(function(blob){
              SC.upload({
                asset_data: blob,
                title: 'track' + Date.now(),
                sharing: 'private'
              }).then(function(track){
                console.log('uploaded', track);
              }).catch(function(){
                console.log('err', arguments);
              });
            })
          }, 1000);
        }).catch(function(){ console.log('not recording', arguments); });
      };
      document.getElementById('record').addEventListener('click', record);

      SC.stream('tracks/soulhack').then(function(player){
        console.log('loaded the song, access with window.player');
        window.player = player;
      });

      SC.resolve('https://soundcloud.com/forss/soulhack').then(function(track){
        console.log('resolve', track);
      });
    */
    </script>
  </body>
</html>
